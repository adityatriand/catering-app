<p style="color: green"><%= notice %></p>
<div class="page-header mb-4">
  <div class="page-header-content">
    <h1 class="page-title">Order Management</h1>
    <div class="page-actions">
      <%= link_to "ğŸ  Home", '/',  {class: "btn btn-secondary"} %>
      <%= link_to "+ New Order", new_order_path,  {class: "btn btn-success"} %>
    </div>
  </div>
</div>
<h4 class="mt-4 mb-3">Daily Report & Filters</h4>
<div class="filter-buttons-wrapper my-3">
  <!-- Quick Filters - Always Visible -->
  <div class="row g-2 mb-3">
    <div class="col-6 col-md-4 col-lg-auto">
      <%= link_to "Show All", orders_path,  {class: "btn btn-cus w-100"} %>
    </div>
    <div class="col-6 col-md-4 col-lg-auto">
      <%= link_to "Show Order Today", "/orders?today=#{DateTime.current.to_date}",  {class: "btn btn-cus w-100"} %>
    </div>
    <!-- Advanced Filters Button - Mobile Only -->
    <div class="col-12 d-md-none">
      <button class="btn btn-outline-secondary w-100" type="button" data-bs-toggle="collapse" data-bs-target="#advancedFilters" aria-expanded="false" aria-controls="advancedFilters">
        ğŸ” Advanced Filters
      </button>
    </div>
  </div>
  
  <!-- Advanced Filters - Collapsible on Mobile, Always Visible on Desktop -->
  <div class="collapse d-md-block" id="advancedFilters">
    <div class="row g-2">
      <div class="col-12 col-md-4 col-lg-auto">
        <a class="btn btn-cus w-100" href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#filterEmail">ğŸ“§ Filter By Email</a>
      </div>
      <div class="col-12 col-md-4 col-lg-auto">
        <a class="btn btn-cus w-100" href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#filterPrice">ğŸ’° Filter By Price</a>
      </div>
      <div class="col-12 col-md-4 col-lg-auto">
        <a class="btn btn-cus w-100" href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#filterDate">ğŸ“… Filter By Date</a>
      </div>
    </div>
  </div>
  <div class="modal fade" id="filterEmail" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-secondary">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Display List Order With Email</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="">
            <div class="mb-3">
              <label for="email" class="form-label">Email Customer</label>
              <input type="email" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Insert Email Customer" name="email" required>
            </div>
            <button type="submit" class="btn btn-cus">Filter</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="filterPrice" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-secondary">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Display List Order With Total Price</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="">
            <div class="mb-3">
              <label for="total_price" class="form-label">Total Price</label>
              <input type="total_price" class="form-control" id="total_price" placeholder="Insert Total Price Order" name="total_price" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Choose assign</label>
              <select class="form-select" name="sign">
                <option value="=">Equal</option>
                <option value="<=">Less Than</option>
                <option value=">=">More Than</option>
              </select>
            </div>
            <button type="submit" class="btn btn-cus">Filter</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="filterDate" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-secondary">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Display List Order With Date</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="">
            <div class="mb-3">
              <label for="date_start" class="form-label">Date Start</label>
              <input type="date" class="form-control" id="date_start" placeholder="Insert Total Price Order" name="date_start" required>
            </div>
            <div class="mb-3">
              <label for="date_end" class="form-label">Date End</label>
              <input type="date" class="form-control" id="date_end" placeholder="Insert Total Price Order" name="date_end" required>
            </div>
            <button type="submit" class="btn btn-cus">Filter</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<% if @orders.any? %>
  <div id="orders">
    <div class="row">
      <% @orders.each do |order| %>
        <div class="col-12 col-sm-6 col-md-4 mb-4">
          <div class="card h-100">
            <div class="card-header">
              <strong>ğŸ“§ <%= order.email %></strong>
            </div>
            <div class="card-body d-flex flex-column">
              <%= render order %>
              <div class="mt-auto pt-3">
                <%= link_to "View Details", order,  {class: "btn card-button w-100"} %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% else %>
  <div class="alert alert-info text-center mt-4">
    <h4>No orders found</h4>
    <p>Start by creating your first order!</p>
    <%= link_to "Create First Order", new_order_path, {class: "btn btn-success"} %>
  </div>
<% end %>
